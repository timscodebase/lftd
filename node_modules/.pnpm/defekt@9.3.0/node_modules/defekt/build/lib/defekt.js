"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.defekt = void 0;
const CustomError_1 = require("./CustomError");
const formatErrorMessage_1 = require("./formatErrorMessage");
const defekt = function ({ code, defaultMessage }) {
    var _a;
    return _a = class extends CustomError_1.CustomError {
            constructor(messageOrMetadata = {}) {
                var _a, _b;
                super({
                    code,
                    message: typeof messageOrMetadata === 'string' ?
                        messageOrMetadata :
                        (_b = (_a = messageOrMetadata.message) !== null && _a !== void 0 ? _a : defaultMessage) !== null && _b !== void 0 ? _b : `${(0, formatErrorMessage_1.formatErrorMessage)({ code })}`,
                    cause: typeof messageOrMetadata === 'string' ? undefined : messageOrMetadata.cause,
                    data: typeof messageOrMetadata === 'string' ? undefined : messageOrMetadata.data
                });
            }
        },
        _a.code = code,
        _a;
};
exports.defekt = defekt;
