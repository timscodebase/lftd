"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.hydrateResult = void 0;
const defekt_1 = require("./defekt");
const hydrateCustomError_1 = require("./hydrateCustomError");
const Result_1 = require("./Result");
class HydratingResultFailed extends (0, defekt_1.defekt)({ code: 'HydratingResultFailed' }) {
}
const hydrateResult = function ({ rawResult, potentialErrorConstructors }) {
    if ('value' in rawResult) {
        return (0, Result_1.value)((0, Result_1.value)(rawResult.value));
    }
    if ('error' in rawResult) {
        let processedError = rawResult.error;
        if (potentialErrorConstructors) {
            const hydrateErrorResult = (0, hydrateCustomError_1.hydrateCustomError)({ rawEx: rawResult.error, potentialErrorConstructors });
            if (hydrateErrorResult.hasError()) {
                return (0, Result_1.error)(new HydratingResultFailed({ cause: hydrateErrorResult.error }));
            }
            processedError = hydrateErrorResult.value;
        }
        return (0, Result_1.value)((0, Result_1.error)(processedError));
    }
    return (0, Result_1.error)(new HydratingResultFailed());
};
exports.hydrateResult = hydrateResult;
